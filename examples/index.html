<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>vue-ladda example</title>

  <script src="https://unpkg.com/vue@2.3.2/dist/vue.runtime.min.js"></script>
  <script src="../dist/vue-ladda.js"></script>

  <style>
    button { outline: none; }
  </style>
</head>
<body>
  <div id="app">
  </div>

  <script>
    var app = new Vue({
      el: '#app',

      data: function() {
        return {
          buttons: [
            {
              loading: false,
              'dataStyle': 'expand-left',
              progress: 0,

            },
            {
              loading: false,
              'dataStyle': 'expand-up',
              progress: 0
            },
            {
              loading: false,
              'dataStyle': 'contract-overlay',
              progress: 0
            }
          ]
        }
      },

      // we're using runtime only build here
      render: function(h) {
        var that = this
        return h('div', {}, this.buttons.map(function(button) {
          return h('vue-ladda', {
            props: {
              loading: button.loading,
              "data-style": button.dataStyle,
              progress: button.progress
            },
            on: {
              click: function() { that.submit(button) }
            }
          })
        }));
      },

      methods: {
        submit: function(button) {
          button.loading = true;
          updateButtonProgress(2000, button);

          setTimeout(function() {
            button.loading = false;
          }, 2000);
        }
      }
    });

    function updateButtonProgress(duration, button) {
      var start = null;
      function update(timestamp) {
        var delta, progress;

        if (!start) start = timestamp;
        delta = timestamp - start;
        progress = delta / duration;
        if (progress >= 1 || progress < 0) return;
        button.progress = progress;
        window.requestAnimationFrame(update);
      }

      window.requestAnimationFrame(update);
    }
  </script>
</body>
</html>
